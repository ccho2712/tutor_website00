{% extends 'base.html' %}
{% load static %}
{% block title %}
    | Course - {{ course.title }}
{% endblock title %}
{% block link %}
    <link rel="stylesheet"
          type="text/css"
          href="{% static 'styles/bootstrap4/bootstrap.min.css' %}">
    <link href="{% static 'plugins/font-awesome-4.7.0/css/font-awesome.min.css' %}"
          rel="stylesheet"
          type="text/css">
    <link href="{% static 'plugins/colorbox/colorbox.css' %}"
          rel="stylesheet"
          type="text/css">
    <link rel="stylesheet"
          type="text/css"
          href="{% static 'plugins/OwlCarousel2-2.2.1/owl.carousel.css' %}">
    <link rel="stylesheet"
          type="text/css"
          href="{% static 'plugins/OwlCarousel2-2.2.1/owl.theme.default.css' %}">
    <link rel="stylesheet"
          type="text/css"
          href="{% static 'plugins/OwlCarousel2-2.2.1/animate.css' %}">
    <link rel="stylesheet"
          type="text/css"
          href="{% static 'styles/course.css' %}">
    <link rel="stylesheet"
          type="text/css"
          href="{% static 'styles/course_responsive.css' %}">
{% endblock link %}
{% block content %}
    <!-- Home (breadcrumbs)-->
    <div class="home">
        <div class="breadcrumbs_container">
            <div class="container">
                <div class="row">
                    <div class="col">
                        <div class="breadcrumbs">
                            <ul>
                                <li>
                                    <a href="{% url 'pages:index' %}">Home</a>
                                </li>
                                <li>
                                    <a href="{% url 'courses:courses' %}">Courses</a>
                                </li>
                                <li>{{ course.title }}</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Course -->
    <div class="course">
        <div class="container">
            <div class="row">
                <!-- Course -->
                <div class="col-lg-8">
                    <div class="course_container">
                        <div class="course_title">{{ course.title }}</div>
                        <div class="course_info d-flex flex-lg-row flex-column align-items-lg-center align-items-start justify-content-start">
                            <!-- Course Info Item -->
                            <div class="course_info_item">
                                <div class="course_info_title">Teacher:</div>
                                <div class="course_info_text">
                                    <a href="#">{{ course.tutor }}</a>
                                </div>
                            </div>
                            <!-- Course Info Item -->
                            <div class="course_info_item">
                                <div class="course_info_title">Class Type:</div>
                                <div class="course_info_text">
                                    <a href="#">{{ course.class_type }}</a>
                                </div>
                            </div>
                            <!-- Course Info Item -->
                            <div class="course_info_item">
                                <div class="course_info_title">Subject:</div>
                                <div class="course_info_text">
                                    <a href="#">{{ course.subject }}</a>
                                </div>
                            </div>
                        </div>
                        <button class="btn-primary btn-lg btn-block"
                                data-toggle="modal"
                                data-target="#inquiryModal">Apply for this Course</button>
                        <!-- Course Image -->
                        <div class="course_image">
                            <img src="{{ course.photo_main.url }}" alt="">
                        </div>
                        <!-- Course Tabs -->
                        <div class="course_tabs_container">
                            <div class="tabs d-flex flex-row align-items-center justify-content-start">
                                <div class="tab active">description</div>
                                <div class="tab">curriculum</div>
                            </div>
                            <div class="tab_panels">
                                <!-- Description -->
                                <div class="tab_panel active">
                                    <div class="tab_panel_title">{{ course.title }}</div>
                                    <div class="tab_panel_content">
                                        <div class="tab_panel_text">
                                            <h4 style='color: #0f9cc3ff;'>Target: Senior Secondary 6 students  aiming for Level 4‚Äì5** in 2026 HKDSE</h4>
                                            <h4>
                                                <br />
                                                <h4 style='color: #0f9cc3ff;'>Focus: Exam mastery + SBA confidence | 100% aligned with HKEAA 2025 syllabus</h4>
                                                <p>{{ course.description }}</p>
                                            </div>
                                            <div class="tab_panel_section">
                                                <div class="tab_panel_subtitle" style='color: #1dd16bff;'>Requirements</div>
                                                <ul class="tab_panel_bullets">
                                                    <li>
                                                        A basic understanding of DSE core subject knowledge (e.g., foundational concepts in Maths, Chinese, or Electives) to keep up with course teaching progress.
                                                    </li>
                                                    <li>
                                                        Willingness to complete DSE-specific practice (e.g., timed past paper drills, essay revisions) to strengthen exam skills and monitor improvement.
                                                    </li>
                                                    <li>
                                                        Access to a stable internet connection and a device (computer, tablet, or smartphone) for joining online lectures or downloading DSE past papers/study materials.
                                                    </li>
                                                    <li>
                                                        No prior DSE exam experience required‚Äîcourses are adapted for both S5/S6 students new to DSE prep and those looking to retake or boost scores.
                                                    </li>
                                                </ul>
                                            </div>
                                            <div class="tab_panel_faq">
                                                <div class="tab_panel_title">FAQ</div>
                                                <!-- Accordions -->
                                                <div class="accordions">
                                                    <div class="elements_accordions">
                                                        <div class="accordion_container">
                                                            <div class="accordion d-flex flex-row align-items-center">
                                                                <div>Can I just enroll in a single course?</div>
                                                            </div>
                                                            <div class="accordion_panel">
                                                                <p>
                                                                    Yes, you can! We offer flexible enrollment options, so you‚Äôre free to sign up for just one  course (e.g., Sep, Oct) instead of a full package‚Äîperfect if you only need to boost specific skills.
                                                                </p>
                                                            </div>
                                                        </div>
                                                        <div class="accordion_container">
                                                            <div class="accordion d-flex flex-row align-items-center active">
                                                                <div>I'm not interested in the entire Specialization?</div>
                                                            </div>
                                                            <div class="accordion_panel">
                                                                <p>
                                                                    No problem at all. Our DSE programs are designed to be modular, so you can skip the full specialization and pick only the courses that match your learning goals (like Reading strategies or Speaking practice).
                                                                </p>
                                                            </div>
                                                        </div>
                                                        <div class="accordion_container">
                                                            <div class="accordion d-flex flex-row align-items-center">
                                                                <div>What is the refund policy?</div>
                                                            </div>
                                                            <div class="accordion_panel">
                                                                <p>
                                                                    If you need to cancel, you can get a full refund within 7 days of enrollment‚Äîno hidden fees. After 7 days, partial refunds are available based on how much of the course you‚Äôve completed.
                                                                </p>
                                                            </div>
                                                        </div>
                                                        <div class="accordion_container">
                                                            <div class="accordion d-flex flex-row align-items-center">
                                                                <div>What background knowledge is necessary?</div>
                                                            </div>
                                                            <div class="accordion_panel">
                                                                <p>
                                                                    No advanced background is required! Whether you‚Äôre new to the lessons or have taken the lessons before, our courses start with foundational skills and adjust to your level‚Äîjust a basic grasp of the subject is enough to begin.
                                                                </p>
                                                            </div>
                                                        </div>
                                                        <div class="accordion_container">
                                                            <div class="accordion d-flex flex-row align-items-center">
                                                                <div>Do i need to take the courses in a specific order?</div>
                                                            </div>
                                                            <div class="accordion_panel">
                                                                <p>
                                                                    You don‚Äôt have to! While we suggest starting with ‚ÄúSummer Lesson‚Äù if you‚Äôre new, most courses are self-contained. You can choose the order based on which section you want to improve first.
                                                                </p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Curriculum -->
                                    <div class="tab_panel tab_panel_2">
                                        <div class="tab_panel_content">
                                            <div class="tab_panel_title">{{ course.name }}</div>
                                            <div class="tab_panel_content">
                                                {% if course.syllabus.all %}
                                                    {% for syllabus in course.syllabus.all %}
                                                        <div class="tab_panel_text">
                                                            <p>{{ syllabus.text }}</p>
                                                        </div>
                                                    {% endfor %}
                                                {% else %}
                                                    <div class="tab_panel_text">
                                                        <p>No syllabus available.</p>
                                                    </div>
                                                {% endif %}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Course Sidebar -->
                    <div class="col-lg-4">
                        <div class="sidebar">
                            <!-- Feature -->
                            <div class="sidebar_section">
                                <div class="sidebar_section_title">Course Feature</div>
                                <div class="sidebar_feature">
                                    <div class="course_price">{{ course.price }}</div>
                                    <!-- Features -->
                                    <div class="feature_list">
                                        <!-- Feature -->
                                        <div class="feature d-flex flex-row align-items-center justify-content-start">
                                            <div class="feature_title">
                                                <i class="fa fa-clock-o" aria-hidden="true"></i><span>Class time:</span>
                                            </div>
                                            <div class="feature_text ml-auto">at {{ course.class_time }}</div>
                                        </div>
                                        <!-- Feature -->
                                        <div class="feature d-flex flex-row align-items-center justify-content-start">
                                            <div class="feature_title">
                                                <i class="fa fa-file-text-o" aria-hidden="true"></i><span>Number of lessons:</span>
                                            </div>
                                            <div class="feature_text ml-auto">{{ course.total_classes }} lesson(s)</div>
                                        </div>
                                        <!-- Feature -->
                                        <div class="feature d-flex flex-row align-items-center justify-content-start">
                                            <div class="feature_title">
                                                <i class="fa fa-question-circle-o" aria-hidden="true"></i><span>Duration:</span>
                                            </div>
                                            <div class="feature_text ml-auto">{{ course.duration }} hour(s)</div>
                                        </div>
                                        <!-- Feature -->
                                        <div class="feature d-flex flex-row align-items-center justify-content-start">
                                            <div class="feature_title">
                                                <i class="fa fa-list-alt" aria-hidden="true"></i><span>Rating:</span>
                                            </div>
                                            <div class="feature_text ml-auto">{{ course.rating }}/5</div>
                                        </div>
                                        <!-- Feature -->
                                        <div class="feature d-flex flex-row align-items-center justify-content-start">
                                            <div class="feature_title">
                                                <i class="fa fa-users" aria-hidden="true"></i><span>Enrollment:</span>
                                            </div>
                                            <div class="feature_text ml-auto">{{ course.enrollment_display }}</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Feature -->
                            <div class="sidebar_section">
                                <div class="sidebar_section_title">Tutor</div>
                                <div class="sidebar_teacher">
                                    <div class="teacher_title_container d-flex flex-row align-items-center justify-content-start">
                                        <div class="teacher_image">
                                            <img src="{{ course.tutor.photo.url }}"
                                                 style="width:100px;
                                                        height:100px"
                                                 alt="">
                                        </div>
                                        <div class="teacher_title">
                                            <div class="teacher_name">
                                                <a href="#">{{ course.tutor }}</a>
                                            </div>
                                            {% if course.tutor.is_mvp %}<p class="badge bg-warning text-dark">üåü MVP Tutor</p>{% endif %}
                                            <div class="teacher_position">{{ course.subject }}</div>
                                        </div>
                                    </div>
                                    <div class="teacher_meta_container">
                                        <!-- Teacher Rating -->
                                        <div class="teacher_meta d-flex flex-row align-items-center justify-content-start">
                                            <div class="teacher_meta_title">Average Rating:</div>
                                            <div class="teacher_meta_text ml-auto">
                                                <span>{{ course.tutor.rating }}</span><i class="fa fa-star" aria-hidden="true"></i>
                                            </div>
                                        </div>
                                        <!-- Teacher Review -->
                                        <div class="teacher_meta d-flex flex-row align-items-center justify-content-start">
                                            <div class="teacher_meta_title">Teaching experience:</div>
                                            <div class="teacher_meta_text ml-auto">
                                                <span>{{ course.tutor.experience }}y</span><i class="fa fa-comment" aria-hidden="true"></i>
                                            </div>
                                        </div>
                                        <!-- Teacher Quizzes -->
                                        <div class="teacher_meta d-flex flex-row align-items-center justify-content-start">
                                            <div class="teacher_meta_title">Students taught:</div>
                                            <div class="teacher_meta_text ml-auto">
                                                <span>{{ course.tutor.taught_students }}+</span><i class="fa fa-user" aria-hidden="true"></i>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="teacher_info">
                                        <p>{{ course.tutor.description }}</p>
                                    </div>
                                </div>
                            </div>
                            <!-- Latest Course -->
                            <div class="sidebar_section">
                                <div class="sidebar_section_title">Popular Courses</div>
                                <div class="sidebar_latest">
                                    <!-- Latest Course -->
                                    {% if courses %}
                                        {% for course in courses %}
                                            <div class="latest d-flex flex-row align-items-start justify-content-start">
                                                <div class="latest_image">
                                                    <div>
                                                        <img src="{{ course.photo_main.url }}" alt="">
                                                    </div>
                                                </div>
                                                <div class="latest_content">
                                                    <div class="latest_title">
                                                        <a href="course.html">{{ course.title }}</a>
                                                    </div>
                                                    <div class="latest_price">${{ course.price }}</div>
                                                </div>
                                            </div>
                                        {% endfor %}
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Inquiry Modal -->
        <div class="modal fade" id="inquiryModal" role="dialog">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="inquiryModalLabel">Apply for this Course</h5>
                        <button type="button" class="close" data-dismiss="modal">
                            <span>&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <form action="{% url 'contacts:contact' %}" method="POST">
                            {% csrf_token %}
                            <input type="hidden" name="course_id" value="{{ course.id }}" />
                            <input type="hidden" name="tutor_email" value="{{ course.tutor.email }}" />
                            {% if user.is_authenticated %}
                                <input type="hidden" name="user_id" value="{{ user.id }}" />
                            {% else %}
                                <input type="hidden" name="user_id" value="0" />
                            {% endif %}
                            <div class="form-group">
                                <label for="course" class="col-form-label">Course Title:</label>
                                <input type="text"
                                       name="course"
                                       class="form-control"
                                       value="{{ course.title }}"
                                       readonly />
                            </div>
                            <div class="form-group">
                                <label for="name" class="col-form-label">Name:</label>
                                <input type="text"
                                       name="name"
                                       class="form-control"
                                       {% if user.is_authenticated %}value="{{ user.first_name }} {{ user.last_name }}" readonly{% endif %} />
                            </div>
                            <div class="form-group">
                                <label for="email" class="col-form-label">Email:</label>
                                <input type="email"
                                       name="email"
                                       class="form-control"
                                       {% if user.is_authenticated %}value="{{ user.email }}" readonly{% endif %} />
                            </div>
                            <div class="form-group">
                                <label for="phone" class="col-form-label">Phone:</label>
                                <input type="text" name="phone" class="form-control" />
                            </div>
                            <div class="form-group">
                                <label for="message" class="col-form-label">Message:</label>
                                <textarea name="message" class="form-control"></textarea>
                            </div>
                            <hr />
                            <input type="submit" value="Send" class="btn btn-block btn-secondary" />
                        </form>
                    </div>
                </div>
            </div>
        </div>
    {% endblock content %}
    {% block script %}
        <script src="{% static 'js/jquery-3.2.1.min.js' %}"></script>
        <script src="{% static 'styles/bootstrap4/popper.js' %}"></script>
        <script src="{% static 'styles/bootstrap4/bootstrap.min.js' %}"></script>
        <script src="{% static 'plugins/OwlCarousel2-2.2.1/owl.carousel.js' %}"></script>
        <script src="{% static 'plugins/easing/easing.js' %}"></script>
        <script src="{% static 'plugins/parallax-js-master/parallax.min.js' %}"></script>
        <script src="{% static 'plugins/colorbox/jquery.colorbox-min.js' %}"></script>
        <script src="{% static 'js/course.js' %}"></script>
        <script src="{% static 'js/main.js' %}"></script>
        <script src="{% static 'js/modal.js' %}"></script>
    {% endblock script %}
